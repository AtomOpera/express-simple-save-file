<!DOCTYPE html>
<html>
  <head>
    <title>Lowdb JSON File Database Example Starter</title>
    <meta
      name="description"
      content="Lowdb JSON File Database Example Starter"
    />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <header>
      <h1>
        Users
      </h1>
      <h3 id="url"><b>URL: </b>Loading...</h3>
      <h3 id="user"><b>User: </b>Loading...</h3>
      <input
          id="userInput"
          name="user"
          type="text"
          maxlength="100"
          value=""
          placeholder="Add a user"
        />
    </header>

    <main>
      <form
        action="/new"
        method="POST"
        enctype="application/x-www-form-urlencoded"
      >
        <input
          name="user"
          type="text"
          maxlength="100"
          value=""
          placeholder="Add a user"
        />
        <button type="submit">Add</button>
      </form>
      <form
        action="/user"
        method="GET"
        enctype="application/x-www-form-urlencoded"
      >
        <input
          name="user"
          type="text"
          maxlength="100"
          value=""
          placeholder="Add a user"
        />
        <button type="submit">Add</button>
      </form>
    </main>

    <script>

      const user = document.getElementById('user');
      const url = window.location.href;
      document.getElementById('url').innerHTML = "<b>URL: </b>" + url;
      
      fetch(url+"user")
        .then(response => response.json())
        .then(data => {
          console.log(data);
          user.innerHTML="<b>User: </b>" + data;
        });
  
    </script>
  </body>
</html>
